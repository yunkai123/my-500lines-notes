require_relative 'parser'
require_relative 'processor'
require_relative 'analyzer'

class Pipeline

    attr_reader :data, :user, :trial, :parser, :processor, :analyzer

    def self.run(data, user, trial)
        pipeline = Pipeline.new(data, user, trial)
        pipeline.feed
        pipeline
    end

    def initialize(data, user, trial)
        @data = data
        @user = user
        @trial = trial
    end

    def feed
        @parser = Parser.run(@data)
        @processor = Processor.run(@parser.parsed_data)
        @analyzer = Analyzer.run(@processor.filtered_data, @user, @trial)
    end

end